# This file contains common pin mappings for the BIGTREETECH SKR V1.4
# board. To use this config, the firmware should be compiled for the
# LPC1768 or LPC1769(Turbo).

# See docs/Config_Reference.md for a description of parameters.

# SKR V1.4 Turbo XYE>TMC 2130 SPI, ZZ1>TMC 2208 UART 
# BLTouch  
# Dual Gear Extruder
# LPC1769.

[include macros.cfg]

[include start_end.cfg]

[include homing.cfg]

[include steppers.cfg]

[include extruders.cfg]

[include filament.cfg]

[include heaters.cfg]

[include fan.cfg]

[include display_menus.cfg]

[include lcd.cfg]

[include feature_macros.cfg]

[include printtime.cfg]

[include client.cfg]

[include client_macros.cfg]

[include flexplate.cfg]

[include spoolsamount.cfg]

[include pid_macros.cfg]

[include test_probe_accuracy.cfg]

[include shell_commands.cfg]

########################################
# Printer configuration
########################################

[mcu]
serial: /dev/serial/by-id/usb-Klipper_lpc1769_1040010D871C4AAF3D367C5DC02000F5-if00
restart_method: command
baud: 250000

[mcu auxboard]
serial: /dev/serial/by-id/usb-Klipper_lpc1769_1DC0FF0DC09869AF0FC8405EC62000F5-if00
restart_method: command
baud: 250000 

[mcu rpi]
serial: /tmp/klipper_host_mcu

[adxl345]
cs_pin: rpi:None

[resonance_tester]
accel_chip: adxl345
probe_points:
    214,135.5,20  # an example
    # 155,10,20  # an example
    # 300,10,20  # an example
    # 300,155,20  # an example
    # 155,155,20  # an example
    # 10,155,20  # an example
    # 10,300,20  # an example
    # 155,300,20  # an example
    # 300,300,20  # an example
#max_smoothing: 0.25  # an example

[printer]
kinematics: corexy
max_velocity: 300
max_accel: 6000    
max_accel_to_decel: 3000
max_z_velocity: 25
max_z_accel: 50
square_corner_velocity:  5.0

########################################
# BED Leveling configuration
########################################

[probe]
pin: ^!P1.27
x_offset: -34.0
y_offset: 22.0
speed: 2
samples: 3
samples_result: median
sample_retract_dist: 2
lift_speed: 5
activate_gcode: servo_on 
deactivate_gcode: 

[temperature_sensor Raspberry]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

[input_shaper]
#shaper_freq_x: 68.2  # frequency for the Y mark of the test model
#shaper_type_x: 2hump_ei
#shaper_freq_y: 49.4  # frequency for the Y mark of the test model
#shaper_type_y: 2hump_ei

########################################
# EXP1 / EXP2 (display) pins
########################################

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=P1.30, EXP1_3=P1.18, EXP1_5=P1.20, EXP1_7=P1.22, EXP1_9=<GND>,
    EXP1_2=P0.28, EXP1_4=P1.19, EXP1_6=P1.21, EXP1_8=P1.23, EXP1_10=<5V>,
    # EXP2 header
    EXP2_1=P0.17, EXP2_3=P3.26, EXP2_5=P3.25, EXP2_7=P1.31, EXP2_9=<GND>,
    EXP2_2=P0.15, EXP2_4=P0.16, EXP2_6=P0.18, EXP2_8=<RST>, EXP2_10=<NC>
    # Pins EXP2_1, EXP2_6, EXP2_2 are also MISO, MOSI, SCK of bus "ssp0"

# See the sample-lcd.cfg file for definitions of common LCD displays.

[bed_mesh 110]
version = 1
points =
	  0.064375, 0.045000, 0.014375, -0.005625, 0.003125, 0.002500, -0.005625, 0.013125, 0.038125, 0.053125, 0.076250, 0.135000
	  0.107500, 0.089375, 0.069375, 0.051875, 0.060625, 0.055000, 0.043125, 0.028125, 0.036250, 0.023750, 0.035625, 0.079375
	  0.081250, 0.089375, 0.073125, 0.080000, 0.069375, 0.068750, 0.050000, 0.035625, 0.030000, 0.017500, 0.005000, 0.051250
	  0.081250, 0.080000, 0.085625, 0.084375, 0.078125, 0.050625, 0.016875, 0.023125, -0.001875, -0.000000, -0.018125, 0.003750
	  0.021250, 0.039375, 0.037500, 0.040000, 0.038125, 0.020000, -0.001250, -0.015000, -0.015000, -0.031875, -0.026250, 0.008125
	  0.000000, -0.000625, 0.010000, 0.021250, 0.023125, -0.019375, -0.026875, -0.051250, -0.041250, -0.048750, -0.048750, -0.018750
	  -0.105000, -0.081250, -0.047500, -0.029375, -0.032500, -0.036875, -0.077500, -0.064375, -0.044375, -0.046250, -0.046875, -0.033125
	  -0.171250, -0.113750, -0.075000, -0.048750, -0.023750, -0.036250, -0.054375, -0.036250, -0.028750, -0.029375, -0.041875, -0.034375
	  -0.195000, -0.126250, -0.081875, -0.053750, -0.006250, -0.018125, -0.017500, 0.011875, 0.017500, 0.003125, -0.017500, -0.023750
	  -0.129375, -0.080000, -0.058750, -0.033125, 0.010000, 0.006875, -0.001250, 0.036250, 0.042500, 0.031250, 0.011875, 0.003125
	  -0.098750, -0.065000, -0.050000, -0.022500, 0.006875, 0.026250, 0.036875, 0.066875, 0.076875, 0.073125, 0.061250, 0.049375
	  -0.117500, -0.095000, -0.072500, -0.100625, -0.032500, 0.013750, 0.039375, 0.069375, 0.081250, 0.086875, 0.085625, 0.078750
tension = 0.2
min_x = 20.0
algo = bicubic
y_count = 12
mesh_y_pps = 2
min_y = 20.0
x_count = 12
max_y = 279.93
mesh_x_pps = 2
max_x = 336.91

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [probe]
#*# z_offset = 1.265
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 31.646
#*# pid_ki = 2.637
#*# pid_kd = 94.938
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 33.8
#*# shaper_type_y = 2hump_ei
#*# shaper_freq_y = 39.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 55.537
#*# pid_ki = 2.217
#*# pid_kd = 347.799
#*#
#*# [bed_mesh 60]
#*# version = 1
#*# points =
#*# 	  0.068125, 0.055000, 0.043125, 0.032500, 0.055625, 0.060625, 0.046250, 0.043125, 0.058750, 0.066875, 0.078125, 0.104375
#*# 	  0.098750, 0.092500, 0.083750, 0.079375, 0.096875, 0.093125, 0.078125, 0.061250, 0.063750, 0.053125, 0.051875, 0.071875
#*# 	  0.100000, 0.111875, 0.106875, 0.116875, 0.109375, 0.096250, 0.075625, 0.065625, 0.062500, 0.034375, 0.011875, 0.036875
#*# 	  0.085625, 0.095000, 0.104375, 0.135625, 0.122500, 0.122500, 0.083750, 0.073125, 0.061875, 0.020625, -0.001250, 0.011875
#*# 	  0.045625, 0.068125, 0.070000, 0.081875, 0.078125, 0.053125, 0.035625, 0.015625, 0.019375, -0.019375, -0.028125, -0.017500
#*# 	  0.000000, 0.005000, 0.021250, 0.046875, 0.037500, 0.011250, -0.002500, -0.019375, -0.010625, -0.035625, -0.044375, -0.034375
#*# 	  -0.083125, -0.053125, -0.016250, 0.010000, 0.004375, 0.001875, -0.045625, -0.030000, -0.010625, -0.032500, -0.049375, -0.061250
#*# 	  -0.158125, -0.094375, -0.050000, -0.017500, 0.010000, 0.003125, -0.016250, -0.008750, 0.010625, -0.012500, -0.034375, -0.055000
#*# 	  -0.167500, -0.092500, -0.045000, -0.008750, 0.035625, 0.028125, 0.031250, 0.041875, 0.061250, 0.029375, -0.004375, -0.021875
#*# 	  -0.091875, -0.046250, -0.015000, 0.035000, 0.086875, 0.085625, 0.078750, 0.096250, 0.118125, 0.076250, 0.055625, 0.035625
#*# 	  -0.044375, -0.008750, 0.011250, 0.040625, 0.079375, 0.098125, 0.109375, 0.141875, 0.148125, 0.130625, 0.107500, 0.085000
#*# 	  -0.058125, -0.027500, 0.001875, -0.021250, 0.055625, 0.101250, 0.119375, 0.143750, 0.158750, 0.160000, 0.158125, 0.142500
#*# tension = 0.2
#*# min_x = 20.0
#*# algo = bicubic
#*# y_count = 12
#*# mesh_y_pps = 2
#*# min_y = 20.0
#*# x_count = 12
#*# max_y = 279.93
#*# mesh_x_pps = 2
#*# max_x = 336.91
